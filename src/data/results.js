export const resultData = [
  {
    id: "PASS_3",
    title: "í•©ê²©3 : ì „êµ­í˜•(ë¹„ëŒ€ë©´)",
    level: "Lv 4\nì¤€ë¹„ëœ AI ë§ˆìŠ¤í„° ìœ ë§ì£¼! ğŸ†",
    message:
      "ì»´í“¨í„° í™œìš© ëŠ¥ë ¥ì´ ì•„ì£¼ í›Œë¥­í•˜ì‹­ë‹ˆë‹¤! ë³µì¡í•œ íˆ´ë„ ì²™ì²™ ë‹¤ë£¨ëŠ” ë†€ë¼ìš´ ì ì‘ë ¥ì„ ê°€ì¡Œêµ°ìš”. ë‹¨ìˆœíˆ ë°°ìš°ëŠ” ê²ƒì— ê·¸ì¹˜ì§€ ì•Šê³ , AIë¥¼ ë„êµ¬ ì‚¼ì•„ ë‚˜ë§Œì˜ ì°½ì˜ì ì¸ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì–´ë‚¼ ì¤€ë¹„ê°€ ì™„ë²½í•˜ê²Œ ëë‚¬ìŠµë‹ˆë‹¤. ê³µê°„ì˜ ì œì•½ ì—†ì´ ì˜¨ë¼ì¸ ì„¸ìƒì„ ë¬´ëŒ€ë¡œ ë§ˆìŒê» í™œì•½í•  ìˆ˜ ìˆëŠ” ì¤€ë¹„ê°€ ì™„ë²½í•˜ê²Œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.",
    recommendation: "ë” ë„“ì€ ì„¸ìƒì„ ë§Œë‚  ìˆ˜ ìˆëŠ” ì¤‘-ìƒê¸‰ ë¹„ëŒ€ë©´ ê³¼ì •ì— ë„ì „í•´ë³´ì„¸ìš”.",
    color: "#4ADE80",
  },
  {
    id: "PASS_2",
    title: "í•©ê²©2 : ë‹¨ë…í˜• (ì¦‰ì‹œ)",
    level: "Lv 3\nì„±ì‹¤í•œ ë””ì§€í„¸ íƒí—˜ê°€! ğŸ”­",
    message:
      "ì´ë¡ ê³¼ ì‹¤ë¬´ì˜ ì™„ë²½í•œ ì¡°í™”! ê°•ì‚¬ë‹˜ì˜ ê°€ì´ë“œë¥¼ ìŠ¤í€ì§€ì²˜ëŸ¼ í¡ìˆ˜í•  ìˆ˜ ìˆëŠ” íƒ„íƒ„í•œ ê¸°ë³¸ê¸°ë¥¼ ê°–ì¶”ì…¨ë„¤ìš”. ìƒˆë¡œìš´ ë„êµ¬ì— ëŒ€í•œ ë‘ë ¤ì›€ë³´ë‹¤ í˜¸ê¸°ì‹¬ì´ ë” í° ë‹¹ì‹ ì€, ëŒ€ë©´ ìˆ˜ì—…ì—ì„œ ë™ë£Œë“¤ê³¼ ì†Œí†µí•˜ë©° ì‹¤ì „ ê·¼ë ¥ì„ í‚¤ìš¸ ë•Œ ê°€ì¥ ë¹›ë‚˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.",
    recommendation: "ìƒìƒí•œ í˜„ì¥ê°ì´ ë„˜ì¹˜ëŠ” ëŒ€ë©´ ê³¼ì •ì— ë°”ë¡œ í•©ë¥˜í•´ë³´ì„¸ìš”.",
    color: "#22D3EE",
  },
  {
    id: "PASS_1",
    title: "í•©ê²©1 : ë‹¨ë…í˜• (ì¤€ë¹„ í•„ìš”)",
    level: "Lv 2\nì—´ì • ê°€ë“í•œ ìƒˆì‹¹! ğŸŒ±",
    message:
      "ì ì¬ë ¥ì´ í­ë°œí•˜ê¸° ì§ì „ì˜ ëœ¨ê±°ìš´ ì—´ì •ì„ ê°€ì§€ì…¨êµ°ìš”! ì»´í“¨í„° í™œìš©ì´ ìµìˆ™í•˜ì‹  ë§Œí¼, ë¡œê·¸ì¸ì´ë‚˜ ê³„ì • ê°€ì… ê°™ì€ ëª‡ ê°€ì§€ ë§¤ë“­ë§Œ í’€ë©´ ëˆ„êµ¬ë³´ë‹¤ ë¹ ë¥´ê²Œ ì„±ì¥í•  íƒ€ì…ì…ë‹ˆë‹¤. ì‹œì‘ì´ ë°˜ì´ë¼ëŠ” ë§ì²˜ëŸ¼, ì•½ê°„ì˜ ì¤€ë¹„ë§Œ ë§ˆì¹œë‹¤ë©´ AIë¼ëŠ” ë©‹ì§„ ë‚ ê°œë¥¼ ë‹¬ê³  ë¹„ìƒí•  ì¤€ë¹„ê°€ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.",
    recommendation:
      "ì¤€ë¹„ë¬¼ì„ ì±™ê²¨ ì¦ê±°ìš´ ëŒ€ë©´ ìˆ˜ì—…ì—ì„œ í•¨ê»˜ ì‹œì‘í•´ë³¼ê¹Œìš”?",
    color: "#FF9800",
  },
  {
    id: "FAIL",
    title: "ë¶ˆí•©ê²© : ë¦¬í„°ëŸ¬ì‹œ ì—­ëŸ‰ í•„ìš”",
    level: "Lv 1\në””ì§€í„¸ ì„¸ìƒì˜ ì²«ê±¸ìŒ! ğŸš€",
    message:
      "ë¬´ê¶ë¬´ì§„í•œ AI ì„¸ìƒì— ì²« ë°œì„ ë‚´ë”›ìœ¼ì‹  ìˆœìˆ˜í•œ íƒí—˜ê°€ì´ì‹œêµ°ìš”! í° ê±´ë¬¼ì„ ì§“ê¸° ìœ„í•´ ë•…ì„ ë‹¨ë‹¨íˆ ë‹¤ì§€ëŠ” ì‹œê°„ì´ í•„ìš”í•˜ë“¯, ì§€ê¸ˆì€ PCë¼ëŠ” ê¸°ì´ˆ ì²´ë ¥ì„ ê¸°ë¥´ëŠ” ì†Œì¤‘í•œ ë‹¨ê³„ì…ë‹ˆë‹¤. ì¡°ê¸‰í•´í•˜ì§€ ì•Šê³  í•˜ë‚˜ì”© ìµí˜€ë‚˜ê°€ë‹¤ ë³´ë©´, ë¨¸ì§€ì•Šì•„ ë””ì§€í„¸ ì„¸ìƒì´ ë‹¹ì‹ ì˜ ê°€ì¥ ì¹œí•œ ì¹œêµ¬ê°€ ë  ê²ƒì…ë‹ˆë‹¤.",
    recommendation: "ì°¨ê·¼ì°¨ê·¼ ì‹¤ë ¥ì„ ìŒ“ìœ¼ë©´ì„œ ì»´í“¨í„°ì™€ ì¹œí•´ì§€ëŠ” ì‹œê°„ì´ í•„ìš”í•´ìš”.",
    color: "#F44336",
  },
];

// íŒì • ê¸°ì¤€ ì ìˆ˜ ìƒìˆ˜í™”
const SCORE_THRESHOLD = {
  MIN_PASS: 40,
  EXPERT: 70,
};

/**
 * ë‹µë³€ ê°ì²´ë¥¼ ë°›ì•„ ê·¸ë£¹ë³„ ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ê³  ìµœì¢… ê²°ê³¼ ë°ì´í„°ë¥¼ ë°˜í™˜
 *
 * @param {Object} answers - ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‹µë³€ ë°ì´í„° ê°ì²´
 * @param {Object} answers.id - ë¬¸í•­ ID (Key)
 * @param {number} answers.id.group - í•´ë‹¹ ë¬¸í•­ì˜ ê·¸ë£¹ ë²ˆí˜¸ (1: ê¸°ì´ˆ, 2: ì‹¬í™”)
 * @param {number} answers.id.score - ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‹µë³€ì˜ ì ìˆ˜
 * @example {"1":{group:1, score:10}}, "2":{group:1, score:5}, ...}
 * @returns {Object} ìµœì¢… íŒì • ê²°ê³¼ ë° ì ìˆ˜
 */
export const getFinalResult = (answers) => {
  // ë‹µë³€ ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°
  if (!answers || Object.keys(answers).length === 0) {
    return { ...resultData.find((r) => r.id === "FAIL"), scoreA: 0, scoreB: 0 };
  }

  // ì ìˆ˜ í•©ì‚° (ê·¸ë£¹ë³„)
  const totals = Object.values(answers).reduce(
    (acc, curr) => {
      if (curr.group === 1) acc.groupA += curr.score;
      else acc.groupB += curr.score;
      return acc;
    },
    { groupA: 0, groupB: 0 },
  );

  const { groupA: scoreA, groupB: scoreB } = totals;

  // íŒì • ë¡œì§
  let resultId;

  if (scoreA < SCORE_THRESHOLD.MIN_PASS) {
    resultId = "FAIL";
  } else if (
    scoreA >= SCORE_THRESHOLD.EXPERT &&
    scoreB >= SCORE_THRESHOLD.EXPERT
  ) {
    resultId = "PASS_3";
  } else if (scoreA >= SCORE_THRESHOLD.EXPERT) {
    resultId = "PASS_2";
  } else {
    resultId = "PASS_1";
  }

  // ê²°ê³¼ ë°ì´í„°ë¥¼ ì—†ì„ ê²½ìš° ë§ˆì§€ë§‰ í•­ëª©(FAIL)ì„ ë°˜í™˜í•˜ê±°ë‚˜ undefined ì²˜ë¦¬?
  const result =
    resultData.find((r) => r.id === resultId) ||
    resultData[resultData.length - 1];

  // ìµœì¢… ê²°ê³¼ ì •ë³´ì™€ í•¨ê»˜ ì‹¤ì œ ì ìˆ˜ë„ ê°™ì´ ë„˜ê¹€ (UI í™œìš© ìš©ë„)
  return {
    ...result,
    scoreA,
    scoreB,
  };
};
