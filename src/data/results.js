export const resultData = [
  {
    id: "PASS_3",
    title: "í•©ê²©3 : ì „êµ­í˜•(ë¹„ëŒ€ë©´)",
    level: "Lv 4\nì¤€ë¹„ëœ AI ë§ˆìŠ¤í„° ìœ ë§ì£¼! ğŸ†",
    message:
      "ì¤Œ(Zoom) í™œìš© ëŠ¥ë ¥ê³¼ ì»´í“¨í„° ì¡°ì‘ ì‹¤ë ¥ì´ ì•„ì£¼ í›Œë¥­í•˜ì‹­ë‹ˆë‹¤. ìˆ˜ì—… ì§„ë„ë¥¼ ë”°ë¼ê°€ëŠ” ê²ƒì€ ë¬¼ë¡ , ë°°ìš´ ë‚´ìš©ì„ ì‘ìš©í•´ì„œ ë©‹ì§„ ê²°ê³¼ë¬¼ì„ ë§Œë“œì‹¤ ì¤€ë¹„ê°€ ì™„ë²½í•˜ê²Œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.",
    recommendation: "ì§€ê¸ˆ ë°”ë¡œ ì¤‘-ìƒê¸‰ ë¹„ëŒ€ë©´ ê³¼ì •ì— ì°¸ì—¬í•´ ë³´ì„¸ìš”.",
    color: "#2E7D32",
  },
  {
    id: "PASS_2",
    title: "í•©ê²©2 : ë‹¨ë…í˜• (ì¦‰ì‹œ)",
    level: "Lv 3\nì„±ì‹¤í•œ ë””ì§€í„¸ íƒí—˜ê°€! ğŸ”­",
    message:
      "ê¸°ë³¸ì ì¸ PC í™œìš© ëŠ¥ë ¥ì´ ì•„ì£¼ í›Œë¥­í•˜ì‹­ë‹ˆë‹¤! ëŒ€ë©´ ìˆ˜ì—…ì—ì„œ ê°•ì‚¬ë‹˜ì˜ ì•ˆë‚´ë¥¼ ë”°ë¼ê°€ê¸°ì— ì¶©ë¶„í•œ ì‹¤ë ¥ì„ ê°–ì¶”ê³  ê³„ì‹œë„¤ìš”.",
    recommendation: "ëŒ€ë©´ ê³¼ì •ì— ë°”ë¡œ í•©ë¥˜í•˜ì„¸ìš”.",
    color: "#4CAF50",
  },
  {
    id: "PASS_1",
    title: "í•©ê²©1 : ë‹¨ë…í˜• (ì¤€ë¹„ í•„ìš”)",
    level: "Lv 2\nì—´ì • ê°€ë“í•œ ìƒˆì‹¹! ğŸŒ±",
    message:
      "ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë°°ìš°ë ¤ëŠ” ì˜ì§€ê°€ ì •ë§ ë©‹ì§€ì‹­ë‹ˆë‹¤! ì»´í“¨í„° ì‚¬ìš©ì€ ìµìˆ™í•˜ì‹œì§€ë§Œ, ìˆ˜ì—…ì— í•„ìš”í•œ ê³„ì • ë¡œê·¸ì¸ì´ë‚˜ ê°€ì… ì ˆì°¨ì—ì„œ ì¡°ê¸ˆì˜ ë„ì›€ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°œê°• ì „ ë¯¸ë¦¬ í™˜ê²½ì„ ì ê²€í•´ë‘ë©´ ìˆ˜ì—…ì´ í›¨ì”¬ ì¦ê±°ì›Œì§ˆ ê±°ì˜ˆìš”.",
    recommendation:
      "ìˆ˜ì—…ì— í•„ìš”í•œ ê³„ì • ë“±ì„ ë¯¸ë¦¬ ì¤€ë¹„í•˜ì‹  í›„ ëŒ€ë©´ ê³¼ì •ì— ë„ì „í•˜ì„¸ìš”.",
    color: "#FF9800",
  },
  {
    id: "FAIL",
    title: "ë¶ˆí•©ê²© : ë¦¬í„°ëŸ¬ì‹œ ì—­ëŸ‰ í•„ìš”",
    level: "Lv 1\në””ì§€í„¸ ì„¸ìƒì˜ ì²«ê±¸ìŒ! ğŸš€",
    message:
      "AIë¼ëŠ” ê±°ëŒ€í•œ ì„¸ìƒì— ì²« ë°œì„ ë‚´ë”›ìœ¼ì…¨êµ°ìš”! í° ê±´ë¬¼ì„ ì§“ê¸° ìœ„í•´ ê¸°ì´ˆ ê³µì‚¬ê°€ ì¤‘ìš”í•˜ë“¯, AIë¥¼ ììœ ìì¬ë¡œ ë‹¤ë£¨ê¸° ìœ„í•´ PCì™€ ì¡°ê¸ˆ ë” ì¹œí•´ì§€ëŠ” ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤. ê¸°ë³¸ê¸°ë¥¼ ë‹¤ì§€ëŠ” ê³¼ì •ë¶€í„° ì¦ê²ê²Œ ì‹œì‘í•´ ë³´ì‹œëŠ” ê±´ ì–´ë–¨ê¹Œìš”?",
    recommendation: "ì•„ì‰½ì§€ë§Œ ì»´í“¨í„°ì™€ ì¹œí•´ì§€ëŠ” ì‹œê°„ì´ í•„ìš”í•´ìš”.",
    color: "#F44336",
  },
];

// íŒì • ê¸°ì¤€ ì ìˆ˜ ìƒìˆ˜í™”
const SCORE_THRESHOLD = {
  MIN_PASS: 40,
  EXPERT: 70,
};

/**
 * ë‹µë³€ ê°ì²´ë¥¼ ë°›ì•„ ê·¸ë£¹ë³„ ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ê³  ìµœì¢… ê²°ê³¼ ë°ì´í„°ë¥¼ ë°˜í™˜
 *
 * @param {Object} answers - ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‹µë³€ ë°ì´í„° ê°ì²´
 * @param {Object} answers.id - ë¬¸í•­ ID (Key)
 * @param {number} answers.id.group - í•´ë‹¹ ë¬¸í•­ì˜ ê·¸ë£¹ ë²ˆí˜¸ (1: ê¸°ì´ˆ, 2: ì‹¬í™”)
 * @param {number} answers.id.score - ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‹µë³€ì˜ ì ìˆ˜
 * @example {"1":{group:1, score:10}}, "2":{group:1, score:5}, ...}
 * @returns {Object} ìµœì¢… íŒì • ê²°ê³¼ ë° ì ìˆ˜
 */
export const getFinalResult = (answers) => {
  // ë‹µë³€ ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°
  if (!answers || Object.keys(answers).length === 0) {
    return { ...resultData.find((r) => r.id === "FAIL"), scoreA: 0, scoreB: 0 };
  }

  // ì ìˆ˜ í•©ì‚° (ê·¸ë£¹ë³„)
  const totals = Object.values(answers).reduce(
    (acc, curr) => {
      if (curr.group === 1) acc.groupA += curr.score;
      else acc.groupB += curr.score;
      return acc;
    },
    { groupA: 0, groupB: 0 },
  );

  const { groupA: scoreA, groupB: scoreB } = totals;

  // íŒì • ë¡œì§
  let resultId;

  if (scoreA < SCORE_THRESHOLD.MIN_PASS) {
    resultId = "FAIL";
  } else if (
    scoreA >= SCORE_THRESHOLD.EXPERT &&
    scoreB >= SCORE_THRESHOLD.EXPERT
  ) {
    resultId = "PASS_3";
  } else if (scoreA >= SCORE_THRESHOLD.EXPERT) {
    resultId = "PASS_2";
  } else {
    resultId = "PASS_1";
  }

  // ê²°ê³¼ ë°ì´í„°ë¥¼ ì—†ì„ ê²½ìš° ë§ˆì§€ë§‰ í•­ëª©(FAIL)ì„ ë°˜í™˜í•˜ê±°ë‚˜ undefined ì²˜ë¦¬?
  const result =
    resultData.find((r) => r.id === resultId) ||
    resultData[resultData.length - 1];

  // ìµœì¢… ê²°ê³¼ ì •ë³´ì™€ í•¨ê»˜ ì‹¤ì œ ì ìˆ˜ë„ ê°™ì´ ë„˜ê¹€ (UI í™œìš© ìš©ë„)
  return {
    ...result,
    scoreA,
    scoreB,
  };
};
